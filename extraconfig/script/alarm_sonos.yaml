alarm_sound_sonos_start:
  alias: Start sonos alarm
  sequence:
  - service: script.turn_on
    entity_id: script.alarm_sonos_loop

alarm_sound_sonos_stop:  
  alias: Stop sonos alarm
  sequence:
  - service: script.turn_off
    entity_id: script.alarm_sonos_loop1
  - service: script.turn_off
    entity_id: script.alarm_sonos_loop
  - service: shell_command.alarm_sonos_stop


# Double loop to trick home assistant
alarm_sonos_loop:
  alias: Sonos Alarm loop 
  sequence:
  - service: script.turn_on
    data:
      entity_id: script.alarm_sonos_loop1
 
alarm_sonos_loop1:
  alias: Sonos Alarm loop 1
  sequence:
  - service: shell_command.alarm_sonos_noice
  - delay: 00:00:30
  - service: script.turn_on
    data:
      entity_id: script.alarm_sonos_loop